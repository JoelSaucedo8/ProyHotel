<!-- Formulario de búsqueda de disponibilidad -->
<div *ngIf="!mostrarReserva">
  <h2>Buscar Disponibilidad de Habitaciones</h2>
  <form [formGroup]="busquedaForm" (ngSubmit)="buscarDisponibilidad()">
    <div class="form-row">
      <!-- Fecha de Entrada -->
      <mat-form-field appearance="fill">
        <mat-label>Fecha de Entrada</mat-label>
        <input matInput type="date" formControlName="fechaEntrada">
      </mat-form-field>

      <!-- Fecha de Salida -->
      <mat-form-field appearance="fill">
        <mat-label>Fecha de Salida</mat-label>
        <input matInput type="date" formControlName="fechaSalida">
      </mat-form-field>

      <!-- Cantidad de Personas -->
      <mat-form-field appearance="fill">
        <mat-label>Cantidad de Personas</mat-label>
        <input matInput type="number" formControlName="personas" min="1" max="3">
      </mat-form-field>
    </div>

    <button mat-raised-button color="primary" type="submit">Buscar Disponibilidad</button>
  </form>

  <!-- Mostrar habitaciones disponibles -->
  <div *ngIf="habitacionesDisponibles.length > 0">
    <h3>Habitaciones Disponibles</h3>
    <div *ngFor="let habitacion of habitacionesDisponibles" class="habitacion">
      <p><strong>Número:</strong> {{ habitacion.numero }}</p>
      <p><strong>Capacidad:</strong> {{ habitacion.tipo }}</p>
      <p><strong>Estado:</strong> {{ habitacion.estado }}</p>
      <div *ngIf="(isLoggedIn$ | async)">
          <button mat-raised-button color="accent" (click)="seleccionarHabitacion(habitacion)">Reservar</button>
      </div>
    </div>
  </div>
</div>

<!-- Formulario de reserva -->
<div *ngIf="mostrarReserva">
  <h2>Reservar Habitación</h2>
  <form [formGroup]="reservaForm" (ngSubmit)="reserva()">
    <div class="form-row">
      <!-- Fecha de inicio -->
      <mat-form-field appearance="fill">
        <mat-label>Fecha de inicio</mat-label>
        <input matInput [matDatepicker]="pickerInicio" formControlName="fecha_inicio">
        <mat-datepicker-toggle matSuffix [for]="pickerInicio"></mat-datepicker-toggle>
        <mat-datepicker #pickerInicio></mat-datepicker>
      </mat-form-field>

      <!-- Fecha de fin -->
      <mat-form-field appearance="fill">
        <mat-label>Fecha de fin</mat-label>
        <input matInput [matDatepicker]="pickerFin" formControlName="fecha_fin">
        <mat-datepicker-toggle matSuffix [for]="pickerFin"></mat-datepicker-toggle>
        <mat-datepicker #pickerFin></mat-datepicker>
      </mat-form-field>
    </div>

    <div class="form-row">
      <!-- Tipo de Habitación -->
      <mat-form-field appearance="fill">
        <mat-label>Tipo de Habitación</mat-label>
        <mat-select formControlName="tipoHabitacion">
          <mat-option *ngFor="let tipo of tiposHabitacion" [value]="tipo.value">
            {{ tipo.label }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <!-- Tipo de Cama -->
      <mat-form-field appearance="fill">
        <mat-label>Tipo de Cama</mat-label>
        <mat-select formControlName="tipoCama">
          <mat-option *ngFor="let cama of tiposCama" [value]="cama.value">
            {{ cama.label }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <!-- Información por huésped -->

    <!-- Botones -->
    <div class="form-actions">
      <button mat-raised-button color="primary" type="submit" [disabled]="reservaForm.invalid">Aceptar</button>
      <button mat-raised-button color="warn" type="button" (click)="cancelar()">Cancelar</button>
    </div>
  </form>
</div>